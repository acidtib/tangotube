<%= "Displaying #{@videos_sorted.count} Videos" %>
<div data-controller="toggle">
  <button type= 'submit', data-action="toggle#toggle", class= "filter_button">
    <i class="fas fa-filter fa-lg" aria-hidden="true"></i>
  </button>
  <div class="hidden" data-target="toggle.toggleable">
  <%= form_with(url: root_path, method: 'get') do |f| %>
    <div class="filter_container">
      <div class="filter_item">
        <label>Type</label>
        <%= f.select "videotype", 
            content_tag( :option, 
                        "Select All #{@videotypes.count} Types", 
                        selected: "selected", value: "" ) +
                        options_for_select(@videotypes),
            class: 'js-searchable',
            name: "videotype_id" %>
      </div>
      <div class="filter_item">
        <label>Genre</label>
        <%= f.select "genre", 
            content_tag(:option, 
                        "Select All #{@genres.count} Genres", 
                        selected: "selected", value: "" ) +
            options_for_select(@genres),
            class: 'js-searchable',
            name: "genre" %>
      </div>
      <div class="filter_item">
        <label>Leader</label>
        <%= f.select "leader", 
            content_tag(:option, 
                        "Select All #{@leaders.count} Leaders", 
                        selected: "selected", value: "" ) +
            options_for_select(@leaders),
            class: 'js-searchable',
            name: "leader_id" %>
      </div>
      
      <div class="filter_item">
        <label>Follower</label>
        <%= f.select "follower", 
            content_tag(:option, 
                        "Select All #{@followers.count} Followers", 
                        selected: "selected", value: "" ) +
            options_for_select(@followers),
            class: 'js-searchable',
            name: "follower_id" %>
      </div>
      <div class="filter_item">
        <label>Event</label>
        <%= f.select "event", 
            content_tag( :option, 
                            "Select All #{@events.count} Events", 
                            selected: "selected", value: "" ) +
                            options_for_select(@events),
            class: 'js-searchable',
            name: "event_id" %>
      </div>
      <div class="filter_item">
        <label>Channel</label>
        <%= f.select :channel,
            content_tag(:option,
                          "Select All #{@channels.count} Channels",
                          selected: "selected", value: "" ) +
                          options_for_select(@channels,
                          request.params.merge(channel: params[:channel])),
            class: 'js-searchable',
            name: "channel" %>
      </div>
      <%= f.submit("Filter")%>
      <% end %>
    </div>
  </div>
</div>